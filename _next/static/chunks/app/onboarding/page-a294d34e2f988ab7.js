(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{1058:(e,t,r)=>{Promise.resolve().then(r.bind(r,1929))},1142:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});let s=(0,r(1958).UU)("https://rcofndbwultxfqiwqmst.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJjb2ZuZGJ3dWx0eGZxaXdxbXN0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY5MTk1MDIsImV4cCI6MjA4MjQ5NTUwMn0.pYykBYeJx9_9gu98f1Vi1E_GVoiKhSBNtcr77nxQMmY")},1929:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5155),l=r(2115),a=r(3321),o=r(4514),n=r(2558),i=r(9521);let u=[{name:"The Weeknd",size:"w-32 h-32",color:"bg-orange-100",text:"text-orange-600"},{name:"Taylor Swift",size:"w-28 h-28",color:"bg-blue-100",text:"text-blue-600"},{name:"Drake",size:"w-24 h-24",color:"bg-purple-100",text:"text-purple-600"},{name:"Ariana Grande",size:"w-36 h-36",color:"bg-pink-100",text:"text-pink-600"},{name:"Justin Bieber",size:"w-20 h-20",color:"bg-yellow-100",text:"text-yellow-600"},{name:"Post Malone",size:"w-28 h-28",color:"bg-gray-100",text:"text-gray-600"},{name:"Ed Sheeran",size:"w-32 h-32",color:"bg-red-100",text:"text-red-600"},{name:"Dua Lipa",size:"w-24 h-24",color:"bg-indigo-100",text:"text-indigo-600"},{name:"Harry Styles",size:"w-30 h-30",color:"bg-green-100",text:"text-green-600"},{name:"Doja Cat",size:"w-26 h-26",color:"bg-rose-100",text:"text-rose-600"},{name:"Billie Eilish",size:"w-28 h-28",color:"bg-lime-100",text:"text-lime-600"},{name:"Bruno Mars",size:"w-22 h-22",color:"bg-orange-200",text:"text-orange-700"}];function c(){let e=(0,a.useRouter)(),{user:t}=(0,i.A)(),[r,c]=(0,l.useState)([]),[d,h]=(0,l.useState)(!1),m=async()=>{h(!0),t&&await (0,n.H)(t.id,r),setTimeout(()=>{h(!1),e.push("/")},1500)};return(0,s.jsxs)("div",{className:"min-h-full w-full p-4 flex flex-col pt-10 bg-white items-center",children:[(0,s.jsxs)("div",{className:"w-full max-w-md text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-neutral-800 mb-2",children:"Choose artists you like"}),(0,s.jsx)("p",{className:"text-neutral-500 text-sm",children:"Recommendations will improve the more you listen."})]}),(0,s.jsx)("div",{className:"flex flex-wrap justify-center gap-4 max-w-lg mb-24",children:u.map(e=>{let t=r.includes(e.name);return(0,s.jsxs)("button",{onClick:()=>{var t;return t=e.name,void(r.includes(t)?c(r.filter(e=>e!==t)):c([...r,t]))},className:`
                            rounded-full flex items-center justify-center transition-all duration-300 relative
                            ${e.size}
                            ${t?"bg-orange-500 scale-110 shadow-lg shadow-orange-500/40":e.color}
                        `,children:[(0,s.jsx)("div",{className:"absolute inset-2 rounded-full overflow-hidden opacity-80",children:!t&&(0,s.jsx)("div",{className:"w-full h-full opacity-20 bg-black"})}),(0,s.jsx)("span",{className:`
                            relative z-10 font-bold text-center text-sm px-2
                            ${t?"text-white":e.text}
                        `,children:e.name}),t&&(0,s.jsx)("div",{className:"absolute -top-1 -right-1 bg-white rounded-full p-1 shadow-md",children:(0,s.jsx)(o.A,{size:12,className:"text-orange-500"})})]},e.name)})}),(0,s.jsx)("div",{className:"fixed bottom-0 left-0 right-0 p-6 bg-white/80 backdrop-blur-md md:static md:bg-transparent",children:(0,s.jsx)("button",{onClick:m,disabled:r.length<3,className:`w-full max-w-md mx-auto py-4 rounded-full font-bold text-lg transition-all duration-300 flex items-center justify-center gap-2 ${r.length>=3?"bg-orange-500 text-white hover:bg-orange-600 hover:scale-105 shadow-xl shadow-orange-500/30":"bg-neutral-200 text-neutral-400 cursor-not-allowed"}`,children:d?"Creating Playlist...":"DONE"})})]})}},2558:(e,t,r)=>{"use strict";r.d(t,{H:()=>a,_:()=>l});var s=r(1142);let l=async(e,t,r)=>{let l=r||"My Group Mix";console.log(`Creating playlist '${l}' for user ${e} with artists: ${t.join(", ")}`);let{data:a,error:o}=await s.N.from("playlists").insert({title:l,user_id:e,description:`Created from artists: ${t.join(", ")}`}).select().single();if(o)throw console.error("Error creating playlist - Full Object:",JSON.stringify(o,null,2)),console.error("Error Message:",o.message),console.error("Error Code:",o.code),console.error("Error Details:",o.details),o;if(!a)return console.error("No playlist returned after insert."),[];console.log("Playlist created:",a.id);let{data:n,error:i}=await s.N.from("songs").select("id").in("artist",t);if(i)return console.error("Error fetching songs:",i),[];if(console.log(`Found ${n?.length||0} songs for these artists.`),n&&n.length>0){let e=n.map(e=>({playlist_id:a.id,song_id:e.id})),{error:t}=await s.N.from("playlist_songs").insert(e);t?console.error("Error adding songs to playlist:",t):console.log(`Added ${n.length} songs to playlist.`)}return a},a=async(e,t)=>l(e,t,"Your Weekly Mix")},3321:(e,t,r)=>{"use strict";var s=r(4645);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},4514:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(8340).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},8340:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(2115);let l=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},a=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:l,className:n="",children:i,iconNode:u,...c},d)=>(0,s.createElement)("svg",{ref:d,...o,width:t,height:t,stroke:e,strokeWidth:l?24*Number(r)/Number(t):r,className:a("lucide",n),...!i&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(c)&&{"aria-hidden":"true"},...c},[...u.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(i)?i:[i]])),i=(e,t)=>{let r=(0,s.forwardRef)(({className:r,...o},i)=>(0,s.createElement)(n,{ref:i,iconNode:t,className:a(`lucide-${l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...o}));return r.displayName=l(e),r}},9521:(e,t,r)=>{"use strict";r.d(t,{A:()=>n,AuthProvider:()=>i});var s=r(5155),l=r(2115),a=r(1142);let o=(0,l.createContext)({user:null,loading:!0,signOut:async()=>{}}),n=()=>{let e=(0,l.useContext)(o);if(!e)throw Error("useAuth must be used within AuthProvider");return e};function i({children:e}){let[t,r]=(0,l.useState)(null),[n,i]=(0,l.useState)(!0);(0,l.useEffect)(()=>{(async()=>{let{data:{session:e},error:t}=await a.N.auth.getSession();t?(console.error("Auth session error:",t),(t.message.includes("Refresh Token Not Found")||t.message.includes("Invalid Refresh Token"))&&(await a.N.auth.signOut(),r(null))):r(e?.user??null),i(!1)})();let{data:{subscription:e}}=a.N.auth.onAuthStateChange(async(e,t)=>{console.log("Auth event:",e),"SIGNED_OUT"===e?r(null):("SIGNED_IN"===e||"TOKEN_REFRESHED"===e)&&r(t?.user??null),i(!1)});return()=>e.unsubscribe()},[]);let u=async()=>{await a.N.auth.signOut(),r(null)};return(0,s.jsx)(o.Provider,{value:{user:t,loading:n,signOut:u},children:e})}}},e=>{e.O(0,[958,441,794,358],()=>e(e.s=1058)),_N_E=e.O()}]);