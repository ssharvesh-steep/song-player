(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[900],{1142:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});let s=(0,r(1958).UU)("https://rcofndbwultxfqiwqmst.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJjb2ZuZGJ3dWx0eGZxaXdxbXN0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY5MTk1MDIsImV4cCI6MjA4MjQ5NTUwMn0.pYykBYeJx9_9gu98f1Vi1E_GVoiKhSBNtcr77nxQMmY")},1760:(e,t,r)=>{Promise.resolve().then(r.bind(r,4545))},2558:(e,t,r)=>{"use strict";r.d(t,{H:()=>l,_:()=>a});var s=r(1142);let a=async(e,t,r)=>{let a=r||"My Group Mix";console.log(`Creating playlist '${a}' for user ${e} with artists: ${t.join(", ")}`);let{data:l,error:o}=await s.N.from("playlists").insert({title:a,user_id:e,description:`Created from artists: ${t.join(", ")}`}).select().single();if(o)throw console.error("Error creating playlist - Full Object:",JSON.stringify(o,null,2)),console.error("Error Message:",o.message),console.error("Error Code:",o.code),console.error("Error Details:",o.details),o;if(!l)return console.error("No playlist returned after insert."),[];console.log("Playlist created:",l.id);let{data:n,error:i}=await s.N.from("songs").select("id").in("artist",t);if(i)return console.error("Error fetching songs:",i),[];if(console.log(`Found ${n?.length||0} songs for these artists.`),n&&n.length>0){let e=n.map(e=>({playlist_id:l.id,song_id:e.id})),{error:t}=await s.N.from("playlist_songs").insert(e);t?console.error("Error adding songs to playlist:",t):console.log(`Added ${n.length} songs to playlist.`)}return l},l=async(e,t)=>a(e,t,"Your Weekly Mix")},3321:(e,t,r)=>{"use strict";var s=r(4645);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},4514:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(8340).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},4545:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(5155),a=r(2115),l=r(3321),o=r(4514);let n=(0,r(8340).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var i=r(9521),u=r(2558),c=r(9210);let d=[{name:"The Weeknd",size:"w-24 h-24",color:"bg-orange-100",text:"text-orange-600"},{name:"Taylor Swift",size:"w-20 h-20",color:"bg-blue-100",text:"text-blue-600"},{name:"Drake",size:"w-20 h-20",color:"bg-purple-100",text:"text-purple-600"},{name:"Ariana Grande",size:"w-28 h-28",color:"bg-pink-100",text:"text-pink-600"},{name:"Justin Bieber",size:"w-16 h-16",color:"bg-yellow-100",text:"text-yellow-600"},{name:"Post Malone",size:"w-20 h-20",color:"bg-gray-100",text:"text-gray-600"},{name:"Ed Sheeran",size:"w-24 h-24",color:"bg-red-100",text:"text-red-600"},{name:"Dua Lipa",size:"w-20 h-20",color:"bg-indigo-100",text:"text-indigo-600"},{name:"Harry Styles",size:"w-22 h-22",color:"bg-green-100",text:"text-green-600"},{name:"Doja Cat",size:"w-20 h-20",color:"bg-rose-100",text:"text-rose-600"},{name:"Billie Eilish",size:"w-20 h-20",color:"bg-lime-100",text:"text-lime-600"},{name:"Bruno Mars",size:"w-16 h-16",color:"bg-orange-200",text:"text-orange-700"}];function h(){let e=(0,l.useRouter)(),{user:t}=(0,i.A)(),[r,h]=(0,a.useState)([]),[m,g]=(0,a.useState)(""),[x,f]=(0,a.useState)(!1),p=async()=>{if(t&&m.trim()){f(!0);try{await (0,u._)(t.id,r,m),e.push("/library"),e.refresh()}catch(e){console.error("Failed to create playlist",e),alert("Failed to create playlist")}finally{f(!1)}}};return(0,s.jsx)("div",{className:"h-full w-full overflow-y-auto bg-gray-50 p-6 pb-24",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto flex flex-col items-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-neutral-800 mb-2",children:"Create New Playlist"}),(0,s.jsx)("p",{className:"text-neutral-500 text-center mb-8",children:"Name your playlist and pick artists to automatically add their songs."}),(0,s.jsxs)("div",{className:"w-full mb-8",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Playlist Name"}),(0,s.jsx)(c.p,{placeholder:"e.g. Morning Vibe, Workout Mix",value:m,onChange:e=>g(e.target.value),className:"bg-white border-neutral-200 text-lg h-14 rounded-xl focus:border-orange-500 focus:ring-orange-500"})]}),(0,s.jsxs)("div",{className:"w-full mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-4",children:"Select Artists to Group"}),(0,s.jsx)("div",{className:"flex flex-wrap justify-center gap-4",children:d.map(e=>{let t=r.includes(e.name);return(0,s.jsxs)("button",{onClick:()=>{var t;return t=e.name,void(r.includes(t)?h(r.filter(e=>e!==t)):h([...r,t]))},className:`
                                    rounded-full flex items-center justify-center transition-all duration-300 relative
                                    ${e.size}
                                    ${t?"bg-orange-500 scale-110 shadow-lg shadow-orange-500/40":e.color}
                                `,children:[(0,s.jsx)("span",{className:`
                                    relative z-10 font-bold text-center text-xs px-1
                                    ${t?"text-white":e.text}
                                `,children:e.name}),t&&(0,s.jsx)("div",{className:"absolute -top-1 -right-1 bg-white rounded-full p-1 shadow-md",children:(0,s.jsx)(o.A,{size:12,className:"text-orange-500"})})]},e.name)})})]}),(0,s.jsx)("button",{onClick:p,disabled:x||!m.trim()||0===r.length,className:`w-full py-4 rounded-full font-bold text-lg transition-all duration-300 flex items-center justify-center gap-2 shadow-lg mt-8 ${!x&&m.trim()&&r.length>0?"bg-orange-500 text-white hover:bg-orange-600 hover:scale-105 shadow-orange-500/30":"bg-neutral-200 text-neutral-400 cursor-not-allowed"}`,children:x?"Creating...":(0,s.jsxs)(s.Fragment,{children:["Create Playlist ",(0,s.jsx)(n,{size:20})]})})]})})}},8340:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(2115);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:u,...c},d)=>(0,s.createElement)("svg",{ref:d,...o,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:l("lucide",n),...!i&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(c)&&{"aria-hidden":"true"},...c},[...u.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(i)?i:[i]])),i=(e,t)=>{let r=(0,s.forwardRef)(({className:r,...o},i)=>(0,s.createElement)(n,{ref:i,iconNode:t,className:l(`lucide-${a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...o}));return r.displayName=a(e),r}},9210:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var s=r(5155),a=r(2115),l=r(622);let o=(0,a.forwardRef)(({className:e,type:t,disabled:r,...a},o)=>(0,s.jsx)("input",{type:t,className:(0,l.QP)("flex w-full rounded-md bg-neutral-700 border border-transparent px-3 py-3 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-neutral-400 disabled:cursor-not-allowed disabled:opacity-50 focus:outline-none",e),disabled:r,ref:o,...a}));o.displayName="Input"},9521:(e,t,r)=>{"use strict";r.d(t,{A:()=>n,AuthProvider:()=>i});var s=r(5155),a=r(2115),l=r(1142);let o=(0,a.createContext)({user:null,loading:!0,signOut:async()=>{}}),n=()=>{let e=(0,a.useContext)(o);if(!e)throw Error("useAuth must be used within AuthProvider");return e};function i({children:e}){let[t,r]=(0,a.useState)(null),[n,i]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{let{data:{session:e},error:t}=await l.N.auth.getSession();t?(console.error("Auth session error:",t),(t.message.includes("Refresh Token Not Found")||t.message.includes("Invalid Refresh Token"))&&(await l.N.auth.signOut(),r(null))):r(e?.user??null),i(!1)})();let{data:{subscription:e}}=l.N.auth.onAuthStateChange(async(e,t)=>{console.log("Auth event:",e),"SIGNED_OUT"===e?r(null):("SIGNED_IN"===e||"TOKEN_REFRESHED"===e)&&r(t?.user??null),i(!1)});return()=>e.unsubscribe()},[]);let u=async()=>{await l.N.auth.signOut(),r(null)};return(0,s.jsx)(o.Provider,{value:{user:t,loading:n,signOut:u},children:e})}}},e=>{e.O(0,[958,622,441,794,358],()=>e(e.s=1760)),_N_E=e.O()}]);